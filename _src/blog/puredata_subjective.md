---
date: 2016-04-27
title: Puredataで評価実験
permalink: Puredata_subjective_test
layout: blog.hbs
---


微妙な需要ですが、Puredataはアルゴリズム作曲とか、シンセやエフェクター作ったりする以外にも（特に音を使う）主観評価実験に使うと便利だったりします。

大体の実験で、

- DAWソフトとかでパラメーターごとの音刺激を作成
- iTunesとかのプレイリストに音刺激入れてランダム再生
- 紙の解答用紙に記録してもらう
- 出てきたデータをエクセルにひたすら入力(めんどくさい)
- エクセルからCSV書き出し
- Rとかでデータの解析

という手順になったりするのですがこの内の**iTunes、紙、エクセル**の部分をPuredataを使えば一つにまとめることが出来ます。

当然実験内容によって作り方が変わるので万能のパッチは存在しないのですが、ある程度共通して使えるメソッドはあるのでここに書き記しておこうと思います。
{{config.root}}
<img src="{{config.root}}assets/img/A_D_M.JPG" alt="">
<!-- more -->

ちなみに、「GUIとか組むならMaxのほうがプレゼンテーションモード使えて楽やん」と言うのはごもっともですが実験のためだけにMax買うのがつらいとか、（芸術系の大学はともかく）大学の授業だとMaxよりPuredataのほうが多そうな気もするので今回はPuredataで例示しようと思います。
それと、Pdの利点としてもう1つあげられるのは**直接CSVファイルに記録できること**があります。Maxでもdict使ってJSONで記録すれば似たようなことは出来ますが。。。


### 仮の実験内容

今回はこの記事通して架空の「ステレオ音源の音像幅を狭めた時の印象評価」という実験用パッチを作ってみます。

この実験では「元の音源を3種類」「ステレオの音像幅を100%、75%、50%、25%」に変化させたのをそれぞれの元音源と比較して（つまり100%は変化なし）、それぞれの「音像幅、包まれ感、空間の広がり」がどのくらい変化したかを回答してもらうとします。

これが統計の評価的に妥当な実験かどうかはとりあえず無視して、実際の制作に役立ちそうな部分だけを寄せ集めたものだと思ってください。

### パラメーターの洗い出し

実験用パッチを作るにあたって最初にパラメーターが何種類あるかを洗い出します。

今回は「元の音源を3種類」「ステレオの音像幅を100%、75%、50%、25%に変化させる」でした。
ということは今回は12種類の比較があるわけです。

### パラメーターを順列に対応させる

まずはこの全パターンを1~12の番号に1つずつ割り振ります。

具体的にはこのような感じです。

<img src="{{config.root}}assets/img/A_D_M.JPG" alt="">

さて、これに加えて「音量を+2、+1、±0、-1、−2、-3dB変化させる」というパラメーターを加えたくなった場合はどうでしょう（妥当性があるかは相変わらず無視です）。

こんな感じですね。
<img src="{{config.root}}assets/img/A_D_M.JPG" alt="">

実際に数値はArgumentに書くか右インレットに入れるかのどちらかでよいので、次の内どちらでも良いです。
<img src="{{config.root}}assets/img/A_D_M.JPG" alt="">
<img src="{{config.root}}assets/img/A_D_M.JPG" alt="">

これで、0~71の順列に対応した組み合わせが吐き出されるようになります。

### ランダムに出力する

実際の実験では出題がランダムに為されるのが望ましい場合が多いですね。
0~71で規則的に組み合わせが並んでいるので、0~71の数字をバラバラな順番に
