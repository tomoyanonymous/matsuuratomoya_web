---
date: 2017-02-15
layout: blog.hbs
title: 大学の卒展のWebサイトをSPA(Riot.js)で作った話
permalink: sotsuten_web

---

技術ネタ供養の回です。

先日、自分の所属している東京藝術大学の音楽環境創造科というところの卒展（正確には展示だけじゃなくて発表会なんですが）がおわりまして、それの運営委員長をやりつつWebサイトのコーディングをするという事をしていました。

<http://onkansotsuten.com>

今までも幾つかこういうイベントもののWebを作ってきて、それまでは静的サイトで構築していたのですが今回始めてRiot.jsというやたらモダンなフレームワークを導入してSPA（シングルページアプリケーション）としてWebサイトを構築したのでその裏話です。

<!-- more -->

# 求められる仕様

今回のWebサイトでは結局

- 学科紹介
- **作品・論文紹介**
- **タイムテーブル・会場案内**
- 学生インタビュー
- 論文集の販売案内
- アクセス

とかをやって、特に太字で書いた通り作品紹介とタイムテーブルが肝でした。

先ほども書いたように卒展と名乗りつつもコンサート・演劇・オーディオドラマなど時間指定系のものがあるのでタイムテーブルの制作が必須。またそれ以外にも論文発表やらインスタレーションやらやってることがバラバラすぎるので個々人何をやっているのかをちゃんと紹介できるようにしておく必要がありました。

その作品のジャンルがまた多い以外にそもそも参加人数や会場もそこそこあるのでタイムテーブルをパッと見ただけだと何が入ってるかよくわからん、みたいなことが発生するので出来ればその辺を解決したかったというのがあります。

# 今まで

参考までに自分が今までやった学校関係のイベントのWebサイトは以下の通り。

## 千住アートパス2013

<http://senjuartpath.com/2013>

Webの担当者が別に外部にいたが蒸発。2週間ぐらい前になって作れないかと話が飛んでくる（この時学部1年）。前年のWeb(<http://senjuartpath.com/2012>)のレイアウトそのままに色とかデザインだけをその年仕様に寄せて作り直す方向で行こうという方針になる。

ところが前年のWebサイトをダウンロードするとどうやらWordのHTML出力したものであることが発覚し途方に暮れながら見た目だけ同じになるようにフルスクラッチで書き直す。

この年ぐらいにはメインブラウザでだいたいcss3のflex-boxが効くようになっていたので旧ブラウザを切り捨てわりとシンプルにレイアウトを組んだ。

作品情報・タイムテーブルはかなり直前に出来上がったパンフのデータをjpgにしてベタ貼り。

## 千住アートパス2014

<http://senjuartpath.com/2014>

Webはメインをフライヤーなどを作ってくれたデザイナーさんに頼んでいたが、

- 作品情報をパンフベタ貼りじゃなくてちゃんと個別に情報見られるようにしよう
- でも作品情報のデータのやり取りは多分学生側で片付けないと間に合わないからそこだけこっちでやろう

という流れで作品情報ページ部分だけを担当することに。デザイナーさんからイラレのカンプだけ貰って実装はこっち側で勝手にやるのでわりと気楽だったが情報のアップロードをどこまでこっちでやっていいのかで結構苦労。
並べるのはご存知[Masonry](http://masonry.desandro.com/)と[Fancybox](http://fancyapps.com/fancybox/)を使用。

今思うと結構デザイナーさん担当部分がjQuery地g・・・なんでもないんですあれだったんですが、この時初めてjQuery使ったので勉強しつつ色々頑張った思い出。
テンプレートだけ他の人に渡して作品の情報を流し込んでもらい大量のテキストファイルからコピペしてHTMLソースにコピペしていくというわりと地獄だった思い出。

ちなみにタイムテーブルはやっぱりパンフベタ貼り。

## 千住アートパス2015

<http://senjuartpath.com/2015>

gulpとejsを使ってミニ静的サイトジェネレータ的なものを作る。ヘッダー・フッターのコピペが必要なくなったのと作品情報をGoogleスプレッドシート→csv→jsonと変換して一発生成という技を覚えたため作業がだいぶ楽になる。

深夜3時位にデザイナーさんと素材をやり取りしながらリアルタイム反映させるという地獄をやってしまい結構反省した。

ここまで来てもタイムテーブルはやっぱりパンフベタ貼り。

# なぜSPAか

基本、HTML信者なので（？）あんまりSPA好きじゃないです。あとから見てソースがよくわかんなくなるし、こと学生のWebサイトだとどんなスキルの人が後から見て参考にするかわからんのもあるし、アーカイブとしての役目も考えるとできるだけシンプルな構造な方がよい。実際3年間完全にワンマンで千住アートパスを作り続けた結果後輩がめっちゃ困るという自体が発生したので結構反省していた。

しかし、タイムテーブルだけは時間をかければ気合でHTML＋fancyboxとか使えばどうにかなるかもしれんがタイムテーブルが確定するの自体イベントから結構ギリギリになるので一刻も早く外に知らせたいのもある。

